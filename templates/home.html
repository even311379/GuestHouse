<!-- index.html -->
{% extends "base.html" %}
{% block morehead %}
<style>
	.carousel-inner > .carousel-item > img { width:550px; height:350px; }

	.fa-arrow-right{
		padding-left: 5px;
		padding-right: 5px;
		color: #4d8eff;
	}

	.rwd_table_size_f{
		width: 60%;
	}
	.rwd_table_size_m{
		width: 100%;
	}
	.rwd_input{width: 40%;}	

	 @media only screen and (max-width:500px) and (min-width:150px) {
		 .rwd_input{
			 width: 100%;}
			
	 	}

</style>
{% endblock %}
{% block content %}
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<section class="home_banner_area">
	<div class="banner_inner d-flex align-items-center">
		<div class="overlay bg-parallax" data-stellar-ratio="0.9" data-stellar-vertical-offset="0" data-background=""></div>
		<div class="container">
				<div class="banner_content text-center">
					<h1>湖頂農場民宿</h1>
			
				</div>
			</div>
		</div>
	</div>
</section>
<!--================Booking Area =================-->
<section class="container">
		<div class="booking_area">
			<form name='booking form' action='booking' method='GET'>
				<div class="row" >
					<div class="col-lg-4">
						<br>
						<div class="booking_item">
							<p>入住 - 日期</p>
							<span class="day" id="i_day">{{ in_day }}</span>
							<span class="month" id="i_month">{{ in_month }}</span>
							<input type="text"  name='room_start_date' id="start_date" value='{{ str_inday }}' style="display: none;">
						</div>
						<br>
					</div>
					<div class="col-lg-4">
							<br>
						<div class="booking_item">
							<p>退房 - 日期</p>
							<span class="day" id="o_day">{{ out_day}}</span>
							<span class="month" id="o_month">{{ out_month }}</span>
							<input type="text"  name='room_end_date' id="end_date" value='{{ str_outday }}' style="display: none">
						</div>

						<br>
					</div>
					<div class="col-lg-4">
						<br>
						<div class="booking_item">
								<br>
									<button type="submit" class="main_btn text-uppercase">查詢空房</button>
									<span class="invisible"><input type="text" name='Form id' value='0'></span>
						</div>
						<br>
					</div>
				</div>
			</form>
		</div>
	</section>
	<!--================End Booking Area =================-->
<br><br><br>

<section >
	<div class='container' align='center'>
		<div class="main_title">
		<h2>關於我們</h2>
	</div>
		<br>
		<div class='row'>
	  <p align='left' ><font style="font-size: 150%;font-weight:bold;padding-left:5vw">湖頂農場民宿</font>
		位於溪頭風景線--鳳凰支線，南投八大勝景之一的『麒麟潭』畔，
		不但是空氣清新、景緻幽美，全新的硬體設備，且提供免費無線網路，讓您住得更舒適而溫馨！
	  <br>
	  『湖頂民宿』位居凍頂山下，景色幽美、生態豐富、前臨『麒麟潭』，且鄰近與鳳凰谷鳥園、內湖森
	  林小學、全台灣最美麗的社區----「小半天」、以及避暑聖地-溪頭森林遊樂區(溪頭妖怪村)，
	  是炎炎夏季避暑、清涼的好去處哦！</p>
	  </div>
	  
	  <div class='row'>
		{% load static %}
		<div class='col-sm-4'><img title="" src="{% static 'img/about/about01.jpg' %}" width=300 height=300></div>
		<div class='col-sm-4'><img title="" src="{% static 'img/about/about02.jpg' %}" width=300 height=300></div>
		<div class='col-sm-4'><img title="" src="{% static 'img/about/about03.jpg' %}" width=300 height=300></div>
	  </div>
</section>

<section class="our_room_area">
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-12">
				<div class="main_title">
					<h2 style="
					background:#eef9ff;
					width: 100vw;
					position: relative;
					left: 50%;
					right: 50%;
					margin-left: -50vw;
					margin-right: -50vw;
					line-height:5">

						我們的房間
					</h2>
				</div>
			</div>
		</div>
	</div>
	<br><br>
	<div class="container">
		<div class="row align-items-center" id="room1">
			<div class="col-lg-6"><div class="room_left">
				<div id="R1Indicators" class="carousel slide" data-ride="carousel" data-interval="false">
					<ol class="carousel-indicators">
						<li data-target="#R1Indicators" data-slide-to="0" class="active"></li>
						<li data-target="#R1Indicators" data-slide-to="1"></li>
						<li data-target="#R1Indicators" data-slide-to="2"></li>
						<li data-target="#R1Indicators" data-slide-to="3"></li>
						<li data-target="#R1Indicators" data-slide-to="4"></li>
						<li data-target="#R1Indicators" data-slide-to="5"></li>
					</ol>
					<div class="carousel-inner">
						<div class="carousel-item active">
						<img class="img-fluid" src="/static/img/room/a_room4_0.jpg" alt="First slide">
						</div>
						<div class="carousel-item">
						<img class="img-fluid" src="/static/img/room/a_room4_1.jpg" alt="Second slide">
						</div>
						<div class="carousel-item">
						<img class="img-fluid" src="/static/img/room/a_room4_2.jpg" alt="Third slide">
						</div>
						<div class="carousel-item">
						<img class="img-fluid" src="/static/img/room/a_room4_3.jpg" alt="Second slide">
						</div>
						<div class="carousel-item">
						<img class="img-fluid" src="/static/img/room/a_room4_4.jpg" alt="Second slide">
						</div>
						<div class="carousel-item">
						<img class="img-fluid" src="/static/img/room/A.jpg" alt="Second slide">
						</div>
					</div>
					<a class="carousel-control-prev" href="#R1Indicators" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#R1Indicators" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</div></div>

			<div class="col-lg-6"><div class="room_right">
				
				<h1 class="type">
					四人大套房
				</h1>
				<span style="line-height: 3px;font-weight:bold">
				<p class="price">
					平日:&nbsp;NT.2500元
				</p>
				<p class="holiday_price">
						假日:&nbsp;NT.3200元
				</p>
				</span>

				<div class="row">
						<div class="col-lg-6 col-md-5">
							<ul>
								<li>基本人數<i class="fas fa-arrow-right"></i>4人</li>
								<li>房間坪數<i class="fas fa-arrow-right"></i>12坪</li>
							</ul>
						</div>
						<div class="col-lg-6 col-md-5">
							<ul>
								<li>供應餐點<i class="fas fa-arrow-right"></i>早餐</li>

							</ul>
						</div>
				</div>
				<p>
						※落地窗觀景陽臺台  ※32吋液晶螢幕
				</p>

			</div></div>


		</div> <!-- end of room 1 -->
</div> <!--  end of container -->

<br><br><br>
<section class="latest_blog_area color-bg">
<div class='container-fluid' align='center' style="padding-top:20vh;">
		<!-- style="background-color:#eef9ff;padding-top:20vh;" -->
		<div class="main_title">
		<h2>最新消息</h2>
		</div>
		<br><br>
		<div class='row'>
		{% for news in top3_news %}
		<br>
		<div class="single-recent-blog col-lg-4 col-md-6">
				<div class="thumb">
					<img class="f-img img-fluid mx-auto" src="{{ news.news_thumbnail.url }}" alt="" 
					style="width:30vw;height:30vh;">
				</div>
				<div class="bottom d-flex justify-content-between align-items-center flex-wrap">
					<div class="meta">
						<span>{{ news.news_upload_time}}</span>
					</div>
				</div>
				<h4>{{ news.news_title}}</h4>
				<p style="font-size: 14px">{{news.news_content|truncatechars:150|safe}}
						<button data-toggle="modal" class="btn btn-link" data-target="#myModal{{ forloop.counter }}">more...</button>
					  </p>
			</div>
		
		<div class="modal fade" tabindex="1" role="dialog" id="myModal{{ forloop.counter }}">
		  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
			<div class="modal-content">
			  <div class="modal-header">
				  <h4 class="modal-title"></h4> <!-- this region is blocked by header, so I just more title below-->
			  </div>
			  <div class="modal-body">
				<h4 class="modal-title">{{news.news_title}}</h4>
				<p>{{news.news_content | linebreaks}}</p>
				<p style="font-size: 12px" align='right'>{{ news.news_upload_time}}</p>
			  </div>
			  <div class="modal-footer">
				<button class="btn btn-link" data-dismiss="modal">Close</button>
			  </div>
			</div>
		  </div>
		</div>
		{% endfor %}
		</div>
</div>
</section>
{% endblock %}

{% block scripts %}
<script>
const monthNames = ['一月', '二月', '三月', '四月', '五月','六月',
'七月','八月','九月','十月','十一月','十二月'];

    function addDays(date, days) {
    var result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
  }

  function ajax_date_check(){
		console.log('ajax is triggered!!')
    var start_date = document.getElementById("start_date").value
    var end_date = document.getElementById("end_date").value
		console.log(start_date)
		console.log(end_date)
      $.ajax({
        url: '/ajax/booking_validate_date/',
        data: {
          'start_date': start_date,
          'end_date': end_date
        },
        dataType: 'json',
        success: function (data) {
          if (data.problematic){
            alertify.error('退房日期必須大於入住日期，請重新輸入！'); 
            // alert("退房日期必須大於入住日期，請重新輸入！");
          }
        }
    })
  }

  $("#end_date").change(function () {
		var end_date = new Date(document.getElementById("end_date").value);
		document.getElementById("o_day").innerHTML = end_date.getDate();
		document.getElementById("o_month").innerHTML = monthNames[end_date.getMonth()];
		console.log('triggered?')
    ajax_date_check();
     });
  
  $("#start_date").change(function () {
		var start_date = new Date(document.getElementById("start_date").value);
		document.getElementById("i_day").innerHTML = start_date.getDate();
		document.getElementById("i_month").innerHTML = monthNames[start_date.getMonth()];
		console.log('triggered? start_date?')
    ajax_date_check();
     });

$( function() {
	$( "#end_date" ).datepicker({
	dateFormat: "yy-mm-dd", 
	showOn: "button",
	buttonText: '<i class="fas fa-calendar"></i>'});
} );

$( function() {
	$( "#start_date" ).datepicker({
	dateFormat: "yy-mm-dd", 
  showOn: "button",
  buttonText: '<i class="fas fa-calendar"></i>'});
} );

//  set things after page is fullly loaded
function happycode(){
	var old = document.getElementsByClassName("ui-datepicker-trigger");
	$(".ui-datepicker-trigger").addClass("btn-small btn-info");
	}

window.onload=happycode ;

function checkWidth(init)
{
    /*If browser resized, check width again */
		var test = document.getElementsByClassName("rwd_input");;
    if ($(window).width() < 514) {  
			$('#my_available_table').addClass('table-responsive');
			$('#my_available_table').addClass('rwd_table_size_m');
			$('#my_available_table').removeClass('rwd_table_size_f');
			// $('#rwd_input').removeClass('rwd_input_size_f');
    }
    else {
			$('#my_available_table').removeClass('table-responsive');
			$('#my_available_table').removeClass('rwd_table_size_m');
			$('#my_available_table').addClass('rwd_table_size_f');
			// $('#rwd_input').addClass('rwd_input_size_f');
    }
}

$(document).ready(function() {
    checkWidth(true);

    $(window).resize(function() {
        checkWidth(false);
    });
});
</script>

<link href="//cdnjs.cloudflare.com/ajax/libs/alertify.js/0.3.10/alertify.core.css" rel="stylesheet">  
<link href="//cdnjs.cloudflare.com/ajax/libs/alertify.js/0.3.10/alertify.default.css" rel="stylesheet">  
<script src="//cdnjs.cloudflare.com/ajax/libs/alertify.js/0.3.10/alertify.min.js"></script>

{% endblock %}